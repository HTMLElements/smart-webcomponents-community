
/* Smart HTML Elements v1.0.0 (2018-April) 
Copyright (c) 2011-2018 jQWidgets. 
License: http://htmlelements.com/pricing/ */

 "use strict";Smart("smart-masked-text-box",function(e){function a(){return babelHelpers.classCallCheck(this,a),babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return babelHelpers.inherits(a,e),babelHelpers.createClass(a,[{key:"template",value:function(){return'<div id="container">\n                    <span id="label" inner-h-t-m-l="[[label]]" class ="smart-label"></span>\n                    <input type="text" id="input"\n                        autocomplete="off"\n                        autocorrect="off"\n                        autocapitalize="off"\n                        autofocus="[[autoFocus]]"\n                        disabled="[[disabled]]"\n                        maxlength="[[maxLength]]"\n                        minlength="[[minLength]]"\n                        name="[[name]]"\n                        placeholder="[[placeholder]]"\n                        readonly="[[readonly]]">\n                    <span id="hint" inner-h-t-m-l="[[hint]]" class ="smart-hint"></span>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,t,r){var l=this,n=void 0;switch(e){case"hidePromptOnLeave":r&&!l._focused?l._hidePrompt():l._promptHidden&&l._showPrompt();break;case"maxLength":l.mask.length>0&&(l.maxLength=t);break;case"maskCompleted":case"maskFull":l[e]=t;break;case"promptChar":l._updatePromptChar();break;case"placeholder":l._isPlaceholderRequired()?(l.$.input.value="",l.$.removeClass("has-value")):l._updatePromptChar(),l._updatePromptChar();break;case"mask":n=l._getValueWithTextMaskFormat({start:0,end:l._mask.length},"excludePromptAndLiterals"),l._isPlaceholderRequired()?(l.$.input.value="",l.$.removeClass("has-value")):(l._initializeMask(),l._setValueToMask(n),l._setMaskToInput(),l.maxLength=l._mask.length,l._promptHidden&&l._hidePrompt());break;case"value":l._setValueToMask(r),l._setMaskToInput(),l._promptHidden&&l._hidePrompt();break;case"disabled":l._setFocusable();break;case"readonly":break;default:babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"propertyChangedHandler",this).call(this,e,t,r)}l.value=l._getValueWithTextMaskFormat({start:0,end:l._mask.length},l.textMaskFormat)}},{key:"_createElement",value:function(){var e=this;e._setFocusable(),e._initializeMask(),e._updateMaxLength(),e._isPlaceholderRequired()?(e.$.input.value="",e.$.removeClass("has-value")):(e._setValueToMask(e.value),e._setMaskToInput(),e._updateMaskFullAndCompleted(),e.$.addClass("has-value")),e.$.input.selectionStart=e.$.input.selectionEnd=0,e._initializationValue=e._value=e.value,e._rejectInput=!1}},{key:"_blurHandler",value:function(){var e=this,a=e._isPlaceholderRequired();e.disabled||(e._valueBeforeChange!==e.value&&(e.$.fireEvent("change",{newValue:e.value,oldValue:e._valueBeforeChange}),e._valueBeforeChange=""),e._hidePrompt(),e._focused=!1,e._validateMaskValue(),e.removeAttribute("focused"),e.$.input.value.length>0?e.$.addClass("has-value"):e.$.removeClass("has-value"),a&&(e.$.input.value="",e.$.removeClass("has-value")))}},{key:"_updateMaskFullAndCompleted",value:function(){for(var e=this,a=!0,t=!0,r=!1,l=0;l<e._mask.length;l++){var n=e._mask[l];"mask"===n.type&&(n.required&&(r=!0),""===n.character&&(n.required&&(t=!1),a=!1))}a||!t||r||(t=!1),e.maskFull=a,e.maskCompleted=t}},{key:"_isPlaceholderRequired",value:function(){var e=this,a=e.value&&e.value.length>0,t=e.placeholder.length>0;return!a&&(t||e.autoShowMask)}},{key:"_cleanMask",value:function(e,a){var t=this;e=e||0,a=a||t._mask.length;for(var r=e;r<a;r++){"mask"===t._mask[r].type&&(t._mask[r].character="")}}},{key:"_cutCopyHandler",value:function(e,a){var t=this,r=parseInt(t.$.input.selectionStart,10),l=parseInt(t.$.input.selectionEnd,10),n=t._getValueWithTextMaskFormat({start:r,end:l});return window.clipboardData&&(window.clipboardData.setData("text/plain",n),window.clipboardData.setData("text/html",n)),e&&t._preventDefault(e),"Copy"===a?n:(t._cleanMask(r,l),t.value=t._getValueWithTextMaskFormat({start:0,end:t._mask.length},t.textMaskFormat),t._setMaskToInput(),t.$.input.selectionStart=t.$.input.selectionEnd=r,t.maskFull=t.maskCompleted=!1,n)}},{key:"_documentUpHandler",value:function(){}},{key:"_deleteHandler",value:function(e){var a=this,t=a.$.input.selectionStart,r=a.$.input.selectionEnd,l=e.key,n=t;if(a._preventDefault(e),t===r)if("Backspace"===l)for(var s=t;s>0;s--){var o=a._mask[s-1];if("mask"===o.type){n=s-1,o.character="";break}n=t-1;break}else for(var i=t;i<a._mask.length;i++){var u=a._mask[i];if("mask"===u.type){n=i+1,u.character="";break}n=t+1;break}else a._cleanMask(t,r),"Delete"===l&&(n=r);a._setMaskToInput(),a._updateMaskFullAndCompleted(),a.value=a._getValueWithTextMaskFormat({start:0,end:a._mask.length},a.textMaskFormat),a.$.input.selectionStart=a.$.input.selectionEnd=n}},{key:"_findNextOccupiedPosition",value:function(e){for(var a=this,t=a._mask.length,r=e,l=e;l<t;l++){var n=a._mask[l];if("mask"!==n.type||""!==n.character)break;r++}return r}},{key:"_focusHandler",value:function(e){var a=this;if("INPUT"!==e.context.nodeName.toUpperCase())return void a.$.input.focus();if(!a.disabled&&(a.setAttribute("focused",""),a.selectAllOnFocus&&a.$.input.select(),a._showPrompt(),a._focused=!0,a._isPlaceholderRequired())){a._initializeMask(),a._setValueToMask(a.value),a._setMaskToInput();var t=a._getEditableSelectionStart(0);a.$.input.selectionStart=a.$.input.selectionEnd=t}}},{key:"_setMaskToInput",value:function(){for(var e=this,a="",t=0;t<e._mask.length;t++){var r=e._mask[t],l=void 0;if("literal"===r.type||"separator"===r.type||"placeholder"===r.type||"currency"===r.type)l=r.character;else if("mask"===r.type&&""!==r.character)switch(r.escapeSymbol){case">":l=r.character.toUpperCase();break;case"<":l=r.character.toLowerCase();break;case"|":case"\\":default:l=r.character}else l=r.defaultCharacter;a+=l}e.$.input.value=a}},{key:"_getEditableSelectionStart",value:function(e,a){for(var t=this,r=e;r<t._mask.length;r++){var l=t._mask[r];if("mask"===l.type&&(""===l.character||t.isOverwriteMode||" "===a&&t.resetOnSpace||a===t.promptChar&&t.resetOnPrompt))return r}return-1}},{key:"_getNonEditableSelectionStart",value:function(e,a){for(var t=this,r=e;r<t._mask.length;r++){var l=t._mask[r];if("mask"!==l.type&&l.character===a)return r}return-1}},{key:"_getValueWithTextMaskFormat",value:function(e,a){var t=this,r=e?e.start:0,l=e?e.end:t._mask.length||t.$.input.value.length,n="";if("includePromptAndLiterals"===(a=a||t.cutCopyMaskFormat))return t.$.input.value.substring(r,l);for(var s=r;s<l;s++){var o=t._mask[s];switch(a){case"excludePromptAndLiterals":if("mask"!==o.type)continue;n=""===o.character?n+" ":n+o.character;break;case"includePrompt":if("mask"!==o.type)continue;n=""===o.character?n+o.defaultCharacter:n+o.character;break;case"includeLiterals":if("mask"===o.type&&""===o.character)continue;n+=o.character}}return n.trim()}},{key:"_hidePrompt",value:function(){var e=this,a=new RegExp(e.promptChar,"g");!e.disabled&&e.hidePromptOnLeave&&0!==e.mask.length&&(e.$.input.value=e.$.input.value.replace(a," "),e._promptHidden=!0)}},{key:"_initializeMask",value:function(){var e=this,a=e.mask.length,t=void 0;if(e._mask=[],void 0!==e.mask&&null!==e.mask&&0!==e.mask.length)for(var r=0;r<a;r++){var l=e.mask.charAt(r),n={};switch(n.defaultCharacter=e.promptChar,l){case"0":n.editable=!0,n.required=!0,n.escapeSymbol=t,n.type="\\"===n.escapeSymbol?"literal":"mask",n.maskCharacter="0",n.regex="\\d",n.character="\\"===n.escapeSymbol?n.maskCharacter:"",n.defaultCharacter=e.promptChar,t=null;break;case"9":n.editable=!0,n.required=!1,n.escapeSymbol=t,n.type="\\"===n.escapeSymbol?"literal":"mask",n.maskCharacter="9",n.regex="(\\d|\\s)",n.character="\\"===n.escapeSymbol?n.maskCharacter:"",n.defaultCharacter=e.promptChar,t=null;break;case"#":n.editable=!0,n.required=!1,n.escapeSymbol=t,n.type="\\"===n.escapeSymbol?"literal":"mask",n.maskCharacter="#",n.regex="(\\d|\\s|[+]|[-])",n.character="\\"===n.escapeSymbol?n.maskCharacter:"",n.defaultCharacter=e.promptChar,t=null;break;case"L":n.editable=!0,n.required=!0,n.escapeSymbol=t,n.type="\\"===n.escapeSymbol?"literal":"mask",n.maskCharacter="L",n.regex="([a-zA-Zа-яА-Я])",n.character="\\"===n.escapeSymbol?n.maskCharacter:"",n.defaultCharacter=e.promptChar,t=null;break;case"?":n.editable=!0,n.required=!1,n.escapeSymbol=t,n.type="\\"===n.escapeSymbol?"literal":"mask",n.maskCharacter="?",n.regex="[a-zA-Zа-яА-Я]?",n.character="\\"===n.escapeSymbol?n.maskCharacter:"",n.defaultCharacter=e.promptChar,t=null;break;case"&":n.editable=!0,n.required=!0,n.escapeSymbol=t,n.type="\\"===n.escapeSymbol?"literal":"mask",n.maskCharacter="&",n.regex="[^\\s]",n.character="\\"===n.escapeSymbol?n.maskCharacter:"",n.defaultCharacter=e.promptChar,t=null;break;case"C":n.editable=!0,n.required=!1,n.escapeSymbol=t,n.type="\\"===n.escapeSymbol?"literal":"mask",n.maskCharacter="C",n.regex=".",n.character="\\"===n.escapeSymbol?n.maskCharacter:"",n.defaultCharacter=e.promptChar,t=null;break;case"A":n.editable=!0,n.required=!0,n.escapeSymbol=t,n.type="\\"===n.escapeSymbol?"literal":"mask",n.maskCharacter="A",n.regex="[a-zA-Zа-яА-Я]",n.character="\\"===n.escapeSymbol?n.maskCharacter:"",n.defaultCharacter=e.promptChar,t=null;break;case"a":n.editable=!0,n.required=!1,n.escapeSymbol=t,n.type="\\"===n.escapeSymbol?"literal":"mask",n.maskCharacter="a",n.regex="[a-zA-Zа-яА-Я]?",n.character="\\"===n.escapeSymbol?n.maskCharacter:"",n.defaultCharacter=e.promptChar,t=null;break;case".":n.editable=!1,n.required=!0,n.escapeSymbol=t,n.type="placeholder",n.maskCharacter=".",n.regex=null,n.character=".",n.defaultCharacter=e.promptChar,t=null;break;case",":n.editable=!1,n.required=!0,n.escapeSymbol=t,n.type="placeholder",n.maskCharacter=",",n.regex=null,n.character=",",n.defaultCharacter=e.promptChar,t=null;break;case":":n.editable=!1,n.required=!0,n.escapeSymbol=t,n.type="separator",n.maskCharacter=":",n.regex=null,n.character=":",n.defaultCharacter=e.promptChar,t=null;break;case"/":n.editable=!1,n.required=!0,n.escapeSymbol=t,n.type="separator",n.maskCharacter="/",n.regex=null,n.character="/",n.defaultCharacter=e.promptChar,t=null;break;case"$":n.editable=!1,n.required=!0,n.escapeSymbol=t,n.type="currency",n.maskCharacter="$",n.regex=null,n.character="$",n.defaultCharacter=e.promptChar,t=null;break;case"<":t?"|"===t?t=null:"\\"===t?(n.editable=!1,n.required=!0,n.escapeSymbol=t,n.type="literal",n.maskCharacter="<",n.regex="<",n.character="<",n.defaultCharacter=e.promptChar,t=null):t="<":t="<";break;case">":t?"|"===t?t=null:"\\"===t?(n.editable=!1,n.required=!0,n.escapeSymbol=t,n.type="literal",n.maskCharacter=">",n.regex=">",n.character=">",n.defaultCharacter=e.promptChar,t=null):t=">":t=">";break;case"|":t&&"\\"===t?(n.editable=!1,n.required=!0,n.escapeSymbol=t,n.type="literal",n.maskCharacter="|",n.regex="|",n.character="|",n.defaultCharacter=e.promptChar,t=null):t="|";break;case"\\":t&&"\\"===t?(n.editable=!1,n.required=!0,n.escapeSymbol=t,n.type="literal",n.maskCharacter="\\",n.regex="\\",n.character="\\",n.defaultCharacter=e.promptChar,t=null):t="\\";break;default:n.editable=!1,n.required=!0,n.escapeSymbol=t,n.type="literal",n.maskCharacter=l,n.regex=null,n.character=l,n.defaultCharacter=l,t=null}t||n.type&&e._mask.push(n)}}},{key:"_validateInput",value:function(e,a){var t=this,r=t._mask[a];return new RegExp(r.regex).test(e)}},{key:"_setValueToMask",value:function(e,a){for(var t=this,r=e||"",l=r.length,n=a&&a.start?a.start:0,s=a&&a.end?a.end:t._mask.length,o=n,i=0;o<s&&i<l;)"mask"===t._mask[o].type&&i++,(t._setCharAtPosition(r.charAt(i-1),o)||"mask"!==t._mask[o].type)&&o++;if(o<s)for(var u=o;u<s;u++)"mask"===t._mask[u].type&&(t._mask[u].character="");a&&(a.start=o)}},{key:"_preventDefault",value:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()}},{key:"_showPrompt",value:function(){var e=this;!e.disabled&&e._promptHidden&&e._setMaskToInput()}},{key:"_textBoxChangeHandler",value:function(){var e=this;e.disabled||e.readonly||(e.value=e._getValueWithTextMaskFormat({start:0,end:e._mask.length},e.textMaskFormat),e._valueBeforeChange!==e.value&&(e.$.fireEvent("change",{newValue:e.value,oldValue:e._valueBeforeChange}),e._valueBeforeChange="",e._validateMaskValue()))}},{key:"_textBoxKeyDownHandler",value:function(e){var a=this,t=e.key,r=e.ctrlKey,l=(e.shiftKey,["a","c","v","x"]),n=a.$.input.selectionEnd,s=new RegExp("xxx[\0-]+xxx"),o=/^[a-zA-ZÀ-ÿа-яА-Я0-9.!@?#"$%&:';()*\+,\/;\-=[\\\]\^_{|}<>~` ]+$/,i=a.$.input.selectionStart;if(r&&l.indexOf(t)>-1){var u=function(e,t){var r=document.createElement("textarea");r.style.position="absolute",r.style.left="-1000px",r.style.top="-1000px",document.body.appendChild(r),r.focus(),"Paste"===e?setTimeout(function(){var e=r.value;0==e.length&&window.clipboardData&&(pasteFrom.value=window.clipboardData.getData("Text"),e=r.value),r.parentNode.removeChild(r),a.$.input.focus(),t(e)},25):(r.value=a._cutCopyHandler(null,e),r.focus(),r.setSelectionRange(0,r.value.length),setTimeout(function(){document.designMode="off",r.focus(),r.parentNode.removeChild(r),a.$.input.focus()},25),window.clipboardData&&window.clipboardData.setData("Text",r.value))};switch(t){case"a":a.$.input.setSelectionRange(0,a.$.input.value.length);break;case"c":u("Copy");break;case"v":u("Paste",function(e){var t=a.context;a.context=a,a._textBoxPasteHandler(null,e),a.context=t});break;case"x":u("Cut")}}else{if("Backspace"===t)return a._deleteHandler(e),void a._updateMaskFullAndCompleted();if("Delete"===t)return a._deleteHandler(e),void a._updateMaskFullAndCompleted();if(!a.allowPromptAsInput&&t===a.promptChar)return void a._preventDefault(e);if(!(a.disabled||a.readonly||a.asciiOnly&&!s.test(t)||!o.test(t)||t.length>1)&&(a._preventDefault(e),(i!==n||i!==a.$.input.value.length)&&(" "!==t||a.resetOnSpace))){i=a._getEditableSelectionStart(i,t);var c=function(){-1!==(i=a._getNonEditableSelectionStart(a.$.input.selectionStart,t))&&(a.$.input.selectionStart=a.$.input.selectionEnd=i+1)};if(-1===i)return void c();a._setCharAtPosition(t,i)?(a._setMaskToInput(),a._updateMaskFullAndCompleted(),a.$.input.selectionStart=a.$.input.selectionEnd=i+1):c()}}}},{key:"_textBoxKeyUpHandler",value:function(){var e=this;e.value=e._getValueWithTextMaskFormat({start:0,end:e._mask.length},e.textMaskFormat)}},{key:"_textBoxPasteHandler",value:function(e,a){var t=this,r=t.$.input.value,l=t.$.input.selectionStart,n=void 0,s=t.$.input.selectionEnd;if(e&&t._preventDefault(e),window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):e&&e.clipboardData&&e.clipboardData.getData?n=e.clipboardData.getData("text/plain"):a&&(n=a),s-l!==r.length){if(l===s&&(t.$.input.selectionEnd=s=t._mask.length),t.rejectInputOnFirstFailure)for(var o=0,i=l;i<s;i++)if("mask"===t._mask[i].type){if(!t._validateInput(n.charAt(o),i))return void(t.$.input.selectionStart=t.$.input.selectionEnd=l);if(++o>n.length)break}var u={start:l,end:s};t._setValueToMask(n,u),t._setMaskToInput(),t._updateMaskFullAndCompleted(),t.$.input.selectionStart=t.$.input.selectionEnd=u.start,t.value=t._getValueWithTextMaskFormat({start:0,end:t._mask.length},t.textMaskFormat)}}},{key:"_setCharAtPosition",value:function(e,a){var t=this,r=t._mask[a];if(" "===e&&t.resetOnSpace&&(e=""),"mask"!==r.type||t.readonly||t.disabled||!r.editable)return!1;if(""===e&&!t.resetOnSpace)return!1;if(e===t.promptChar&&!t.resetOnPrompt&&t.allowPromptAsInput)return!1;if(!t.isOverwriteMode&&""!==e&&e!==t.promptChar&&""!==r.character)return!1;var l=r.regex;if(l){if(new RegExp(l,"i").test(e)){switch(r.escapeSymbol){case">":e=e.toUpperCase();break;case"<":e=e.toLowerCase()}return t._mask[a].character=e,!0}return t.resetOnSpace&&""===e?(t._mask[a].character=e,!0):!(!t.resetOnPrompt||e!==t.promptChar||!t.allowPromptAsInput)&&(t._mask[a].character="",!0)}return!1}},{key:"_updateMaxLength",value:function(){var e=this;e._mask.length>0&&(e.maxLength=e._mask.length)}},{key:"_updatePromptChar",value:function(){for(var e=this,a=0;a<e._mask.length;a++){e._mask[a].defaultCharacter=e.promptChar}e._setMaskToInput()}},{key:"_validateMaskValue",value:function(){var e=this;if(!e.readonly&&!e.disabled&&e.validation&&"function"==typeof e.validation){var a=e.value;e.$.fireEvent("validation",{success:e.validation(a)})}}},{key:"_keyUpHandler",value:function(){}},{key:"_selectStartHandler",value:function(){}},{key:"_mouseWheelHandler",value:function(){}},{key:"_applySelection",value:function(){}},{key:"_setDropDownSize",value:function(){}}],[{key:"properties",get:function(){return{allowPromptAsInput:{value:!1,type:"boolean"},asciiOnly:{value:!1,type:"boolean"},autoShowMask:{value:!1,type:"boolean"},cutCopyMaskFormat:{value:"excludePromptAndLiterals",allowedValues:["excludePromptAndLiterals","includePrompt","includeLiterals","includePromptAndLiterals"],type:"string"},hidePromptOnLeave:{value:!1,type:"boolean"},hint:{value:"",reflectToAttribute:!0,type:"string"},isOverwriteMode:{value:!1,type:"boolean"},mask:{value:"#####",type:"string"},maskCompleted:{value:!1,type:"boolean"},maskFull:{value:!1,type:"boolean"},promptChar:{value:"_",type:"string"},rejectInputOnFirstFailure:{value:!1,type:"boolean"},resetOnPrompt:{value:!1,type:"boolean"},resetOnSpace:{value:!1,type:"boolean"},textMaskFormat:{value:"excludePromptAndLiterals",allowedValues:["excludePromptAndLiterals","includePrompt","includeLiterals","includePromptAndLiterals"],type:"string"},validation:{value:null,type:"function?",reflectToAttribute:!1},value:{value:null,reflectToAttribute:!0,type:"string?"}}}},{key:"listeners",get:function(){return{mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler","input.copy":"_cutCopyHandler","input.change":"_textBoxChangeHandler","input.cut":"_cutCopyHandler","input.paste":"_textBoxPasteHandler","input.keydown":"_textBoxKeyDownHandler","input.keyup":"_textBoxKeyUpHandler","input.blur":"_blurHandler","input.focus":"_focusHandler"}}}]),a}(Smart.TextBox));
//# sourceMappingURL=smart.maskedtextbox.js.map
